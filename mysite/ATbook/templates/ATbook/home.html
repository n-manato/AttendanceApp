<!DOCTYPE html>
<html>
    <head>test</head>
    <title>Document</title>
    <style type="text/css">
    table {
      background-color: #ffe;
      border-collapse: collapse;
      width: 800px;
    }
    th {
      background-color: #eee;
      
    }
    th,td {
      border: solid 1px #aaa;

    
    }

    </style>
    <body id = "body">
        <script type="text/javascript">
//=================================================データベースからデータのインポート===============================================


    var teacher = [];
    var student = [];
    var attendance = []
    var attendance_hr = []
    v=0;
    {% for d in attendance_list %}
    attendance_hr[v]=("{{ d.attendance.kind|safe }}");
    teacher[v]=("{{ d.teacher.name|safe }}");
    student[v]=("{{ d.student|safe }}");
    v++;
    {% endfor %}
    console.log(attendance_hr)
    console.log(teacher)
    console.log(student)

    var student_name = [];
    var student_number = [];
    var v = 0;
    {% for member in student_list %}
    student_name[v] = ("{{ member.name|safe }}");
    student_number[v] = ("{{ member.number|safe }}");
    v++;
    {% endfor %}
    console.log(student_name)
    console.log(student_number)

    
//===================================データ表示処理===================================

    let table = document.createElement('table');
    let thead = document.createElement('thead');
    let tbody = document.createElement('tbody');
    table.appendChild(thead);
    table.appendChild(tbody);
    // Adding the entire table to the body tag
    document.getElementById('body').appendChild(table);

    let row_1 = document.createElement('tr');
    let heading_01 = document.createElement('th');
    heading_01.innerHTML = "student";
    let heading_02 = document.createElement('th');
    heading_02.innerHTML = "number";
    let heading_03 = document.createElement('th');
    heading_03.innerHTML = "teacher";
    let heading_04 = document.createElement('th');
    heading_04.innerHTML = "HR";

    row_1.appendChild(heading_01);
    row_1.appendChild(heading_02);
    row_1.appendChild(heading_03);
    row_1.appendChild(heading_04);
    
    thead.appendChild(row_1);

var flag = 0;
var row;
var row_data_01;
var row_data_02;
var row_data_03;
var row_data_04;


for(var j = 0; j < student_name.length; j++){
    for(var i = 0; i <= attendance.length; i++){
        if(student_name[j] == student[i]){
            
            row = document.createElement('tr');

            row_data_01 = document.createElement('td');
            row_data_01.innerHTML = student_name[j];
            row.appendChild(row_data_01);

            row_data_02 = document.createElement('td');
            row_data_02.innerHTML = student_number[j];
            row.appendChild(row_data_02);

            row_data_03 = document.createElement('td');
            row_data_03.innerHTML = teacher[i];
            row.appendChild(row_data_03);

            row_data_04 = document.createElement('td');
            row_data_04.innerHTML = attendance_hr[i];
            row.appendChild(row_data_04);

            table.appendChild(row);
            
            flag = 1;
            break;
        }
    }
    if(flag == 0){
        row = document.createElement('tr');

        row_data_1 = document.createElement('td');
        row_data_1.innerHTML = student_name[j];
        row.appendChild(row_data_1);

        row_3_data_2 = document.createElement('td');
        row_3_data_2.innerHTML = student_number[j];
        row_3.appendChild(row_data_1);

        row_data_3 = document.createElement('td');
        row_data_3.innerHTML = "blank";
        row.appendChild(row_data_2);

        row_data_4 = document.createElement('td');
        row_data_4.innerHTML = "出席";
        row.appendChild(row_data_4);

        table.appendChild(row);
        flag = 1;
    }
    flag = 0;
}
        </script>
    </body>
</html>
